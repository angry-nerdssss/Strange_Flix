{% extends 'base.html' %}
{% load static %}
{% load comment_tags %}  {# Loading the template tag #}

{% block css %}
    <!-- video.js css -->
    <link href="https://vjs.zencdn.net/7.8.4/video-js.css" rel="stylesheet" /><!-- this is vjs css -->

    <!-- quality-selector css -->
    <link href="https://unpkg.com/@silvermine/videojs-quality-selector/dist/css/quality-selector.css" rel="stylesheet">


    <!-- my css -->
    <link rel="stylesheet" href="{% static 'css/video.css' %}">
{% endblock %}

{% block content %}

    <!-- video player -->
    <section class="video-section">
        <div class="video-div">
            <video id="videoPlayer" class="video-js vjs-big-play-centered" controls preload="auto" data-setup='{}'>
                <!-- <source src='{{ MEDIA_URL }}{{ video.videofile }}' type='video/mp4'> -->
                <source src='{{ MEDIA_URL }}{{ video.videofile }}' type='video/mp4' label = "720P" selected="true">
                <source src='{{ MEDIA_URL }}{{ video.videofile }}' type='video/mp4' label = "366P">
                <source src='{{ MEDIA_URL }}{{ video.videofile }}' type='video/mp4' label = "144P">
                
            </video>
            
        </div>
        <div class="video-actions-div">
            <h3 class="video-title">{{video.title}}</h3>
            <h6 class="video-info">{{video.category}} | Language | {{video.publish_date}} | Rating</h6>
            <h6 class="video-content">{{video.description}}</h6>
            <br><br>

            <div class="text-left">
                <span class="pointer">
                   {% if request.user in video.likes.users.all%}
                   <!-- already liked-->
                   <a href={% url 'requirement_video_vote' video_id=video.pk opition='like' %}> <i
                      data-toggle="tooltip" data-placement="bottom" title="Unlike"
                      class="like fas fa-thumbs-up pr-2"
                      style="color:red;"
                      >
                   <span>{{video.get_total_likes}}</span>
                   </i>
                   </a>
                   {% else %}
                   <!--not liked-->
                   <a href={% url 'requirement_video_vote' video_id=video.pk opition='like' %}><i
                      data-toggle="tooltip" data-placement="bottom" title="Like"
                      class="default-icon fas fa-thumbs-up pr-2">
                   <span>{% if video.get_total_likes  %}{{video.get_total_likes}} {% else %} 0
                   {% endif %}</span></i>
                   </a>
                   {% endif %}
                </span>
                <span class="ml-3 pointer">
                {% if request.user in video.dis_likes.users.all %}
                <a href={% url 'requirement_video_vote' video_id=video.pk opition='dis_like' %}><i
                   data-toggle="tooltip" data-placement="bottom" title="i dislike this"
                   class="dislike fas fa-thumbs-down pr-2"
                   style="color:red;">
                <span>{{video.get_total_dis_likes}}</span></i>
                </a>
                {% else %}
                <a href={% url 'requirement_video_vote' video_id=video.pk opition='dis_like' %}><i
                   data-toggle="tooltip" data-placement="bottom" title="i dislike this "
                   class="default-icon fas fa-thumbs-down pr-2">
                <span>{% if  video.get_total_dis_likes %}{{video.get_total_dis_likes}}
                {% else %} 0 {% endif %}</span></i>
                </a>
                {% endif %}
                </span>
                <a  href= "{% url 'favourite_svideo' video.id %}"
                
                {% for i in user.fav_svideos.all %}
                    {% if i.id is video.id %}
                 
                     style="color:red;"
                    {% endif %}
                    {% endfor %}
                    ><i
                    data-toggle="tooltip" data-placement="bottom" title="i dislike this"
                    class="dislike fas fa-heart pr-2"></i>
                    
                </a>

                  
             </div>
            {% render_comments video request %}  {# Render all the comments belong to the passed object "obj" #}

        </div>
    </section>


{% endblock %}

{% block javascript %}
    <script src="https://vjs.zencdn.net/7.8.4/video.js"></script>
    <script src="{% static 'js/hotkeys.js' %}"></script>
    <script src="https://unpkg.com/@silvermine/videojs-quality-selector/dist/js/silvermine-videojs-quality-selector.min.js"></script>
    <script type="text/javascript" src="{% static 'js/video.js' %}"></script>

{% endblock javascript %}