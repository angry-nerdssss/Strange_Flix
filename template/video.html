{% extends 'base.html' %}
{% load static %}
{% load comment_tags %}  {# Loading the template tag #}

{% block css %}
    <!-- video player css -->
    <link href="https://vjs.zencdn.net/7.8.4/video-js.css" rel="stylesheet" />

    <!-- my css -->
    <link rel="stylesheet" href="{% static 'css/video.css' %}">
{% endblock %}

{% block content %}

    <!-- video player -->
    <section class="video-section">
        <div class="video-div">
            <video id="videoPlayer" class="video-js vjs-big-play-centered"  data-setup='{}'>
                <source src='{{ MEDIA_URL }}{{ video.videofile }}' type='video/mp4'>
                <p class="vjs-no-js">
                    To view this video please enable JavaScript, and consider upgrading to a
                    web browser that
                    <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                </p>
            </video>
            <script src="https://vjs.zencdn.net/7.8.4/video.js"></script>
            <script src="{% static 'js/hotkeys.js' %}"></script>
            <script type="text/javascript" src="{% static 'js/video.js' %}"></script>
        </div>
        <div class="video-actions-div">
            <h3 class="video-title">{{video.title}}</h3>
            <h6 class="video-info">{{video.category}} | Language | {{video.publish_date}} | Rating</h6>
            <h6 class="video-content">{{video.description}}</h6>
            <br><br>

            <div class="text-left">
                <span class="pointer">
                   {% if request.user in video.likes.users.all%}
                   <!-- already liked-->
                   <a href={% url 'requirement_video_vote' video_id=video.pk opition='like' %}> <i
                      data-toggle="tooltip" data-placement="bottom" title="Unlike"
                      class="like fas fa-thumbs-up pr-2">
                   <span>{{video.get_total_likes}}</span>
                   </i>
                   </a>
                   {% else %}
                   <!--not liked-->
                   <a href={% url 'requirement_video_vote' video_id=video.pk opition='like' %}><i
                      data-toggle="tooltip" data-placement="bottom" title="Like"
                      class="default-icon fas fa-thumbs-up pr-2">
                   <span>{% if video.get_total_likes  %}{{video.get_total_likes}} {% else %} 0
                   {% endif %}</span></i>
                   </a>
                   {% endif %}
                </span>
                <span class="ml-3 pointer">
                {% if request.user in video.dis_likes.users.all %}
                <a href={% url 'requirement_video_vote' video_id=video.pk opition='dis_like' %}><i
                   data-toggle="tooltip" data-placement="bottom" title="i dislike this"
                   class="dislike fas fa-thumbs-down pr-2">
                <span>{{video.get_total_dis_likes}}</span></i>
                </a>
                {% else %}
                <a href={% url 'requirement_video_vote' video_id=video.pk opition='dis_like' %}><i
                   data-toggle="tooltip" data-placement="bottom" title="i dislike this "
                   class="default-icon fas fa-thumbs-down pr-2">
                <span>{% if  video.get_total_dis_likes %}{{video.get_total_dis_likes}}
                {% else %} 0 {% endif %}</span></i>
                </a>
                {% endif %}
                </span>
             </div>
            {% render_comments video request %}  {# Render all the comments belong to the passed object "obj" #}

        </div>
    </section>


    
{% endblock %}