{% extends 'base.html' %}
{% load static %}
{% load comment_tags %}  {# Loading the template tag #}
{% block css %}
    <!-- video player css -->
    <link href="https://vjs.zencdn.net/7.8.4/video-js.css" rel="stylesheet" />

    <!-- my css -->
    <link rel="stylesheet" href="{% static 'css/video.css' %}">
    <link rel="stylesheet" href="{% static 'css/youtube_video_player.css' %}">
{% endblock %}

{% block content %}

    <!-- video player -->
    <section class="video-section">
        <div class="video-div">
            <script type="text/javascript" src="{% static 'js/youtube_video_player.js' %}"></script>
            
            <iframe src="{{item.video}}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="video-actions-div">
            <h3 class="video-title">{{item.title}}</h3>

            <h6 class="video-info">
                {{item.category}} | Language | {{item.publish_date}} | Rating</h6>
            <h6 class="video-content">{{item.description}}</h6>

            <br><br>
            <div style="display:flex">
                {% for tag in item.tags.all %}
                <a href="{% url 'tagged' tag.slug %}" class="mr-1 badge badge-info">#{{ tag }}</a>
                {% endfor %}
            </div>

            <div class="text-left">
                <span class="pointer">
                   {% if request.user in item.likes.users.all%}
                   <!-- already liked-->
                   <a href={% url 'requirement_item_vote' item_id=item.pk opition='like' %}> <i
                      data-toggle="tooltip" data-placement="bottom" title="Unlike"
                      class="like fas fa-thumbs-up pr-2">
                   <span>{{item.get_total_likes}}</span>
                   </i>
                   </a>
                   {% else %}
                   <!--not liked-->
                   <a href={% url 'requirement_item_vote' item_id=item.pk opition='like' %}><i
                      data-toggle="tooltip" data-placement="bottom" title="Like"
                      class="default-icon fas fa-thumbs-up pr-2">
                   <span>{% if item.get_total_likes  %}{{item.get_total_likes}} {% else %} 0
                   {% endif %}</span></i>
                   </a>
                   {% endif %}
                </span>
                <span class="ml-3 pointer">
                {% if request.user in item.dis_likes.users.all %}
                <a href={% url 'requirement_item_vote' item_id=item.pk opition='dis_like' %}><i
                   data-toggle="tooltip" data-placement="bottom" title="i dislike this"
                   class="dislike fas fa-thumbs-down pr-2">
                <span>{{item.get_total_dis_likes}}</span></i>
                </a>
                {% else %}
                <a href={% url 'requirement_item_vote' item_id=item.pk opition='dis_like' %}><i
                   data-toggle="tooltip" data-placement="bottom" title="i dislike this "
                   class="default-icon fas fa-thumbs-down pr-2">
                <span>{% if  item.get_total_dis_likes %}{{item.get_total_dis_likes}}
                {% else %} 0 {% endif %}</span></i>
                </a>
                {% endif %}
                </span>
                <a href= "{% url 'favourite_yvideo' item.id %}"><i
                    data-toggle="tooltip" data-placement="bottom" title="i dislike this"
                    class="dislike fas fa-heart pr-2"></i></a>
             </div>
            {% render_comments item request %}  {# Render all the comments belong to the passed object "obj" #}

        </div>
    </section>



{% endblock %}